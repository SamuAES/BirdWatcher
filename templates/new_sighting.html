{% extends "layout.html" %}
{% block content %}



<form action="/new_sighting" method="POST">
    <div class="wrapper">
        <div class="select-btn">
            <span>Select bird</span>
            <i class="uil uil-angle-down"></i>
        </div>
        <div class="content">
            <div class="search">
                <i class="uil uil-search"></i>
                <input spellcheck="false" type="text" placeholder="search">
            </div>
            <ul class="options"></ul>
        </div>
        <script> let countries = {{ birdlist | tojson }}; </script>
        <script src="/static/selectbird.js"></script>
    </div>

    <input type="hidden" id="hiddenInput" value="" name="bird_name">

    <p>
        
        Time and date: <input id="dt" type="datetime-local" name="time" min="1900-01-01T00:00"  required >



    </p>
    <p>
        Location: <input type="text" name="location" min="1" max="50" required>
    </p>
    <p>
        Additional information: <br>
        <textarea name="additional_info" rows="3" cols="40" maxlength="500"></textarea>
    </p>
    <input type="submit" value="Send">
</form>
<p>
    <span style="color: red">{{ message }}</span>
</p>
<a href="/sightings">Cancel</a>

<!-- Set datetime-local input value and max date to current time. -->
<script>
    var dateVal = new Date();
    var day = dateVal.getDate().toString().padStart(2, "0");
    var month = (1 + dateVal.getMonth()).toString().padStart(2, "0");
    var hour = dateVal.getHours().toString().padStart(2, "0");
    var minute = dateVal.getMinutes().toString().padStart(2, "0");
    var inputDate = dateVal.getFullYear() + "-" + (month) + "-" + (day) + "T" + (hour) + ":" + (minute);
    document.getElementById("dt").value = inputDate;
    document.getElementById("dt").setAttribute("max", inputDate)
</script>

{% endblock %}

